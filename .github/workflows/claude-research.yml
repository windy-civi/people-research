name: Claude Research Test

on:
  workflow_dispatch:

jobs:
  research:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
    
    - name: Clone openstates/people repository
      run: |
        git clone https://github.com/openstates/people.git openstates-people
    
    - name: Install Claude CLI
      run: |
        npm install -g @anthropic-ai/claude-code
        echo "Claude CLI installed, checking version..."
        claude --version || echo "Claude version check failed"
        echo "Checking if Claude CLI is in PATH..."
        which claude || echo "Claude not found in PATH"
    
    - name: Claude Hello World
      env:
        ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
      run: |
        #!/bin/bash
        set -e
        
        
        echo "Testing Claude with simple prompt"
        
        # Simple hello world prompt
        full_prompt="Hello Claude! Please respond with 'Hello World' and tell me what 2+2 equals."
        
        # Use Claude CLI with --print flag for non-interactive output
        echo "=== SENDING PROMPT TO CLAUDE ==="
        echo "Prompt: $full_prompt"
        echo "=== CLAUDE OUTPUT ==="
        echo "$full_prompt" | claude --print
        echo "=== END CLAUDE OUTPUT ==="